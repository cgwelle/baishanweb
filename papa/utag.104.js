//tealium universal tag - utag.104 ut4.0.202507010813, Copyright 2025 Tealium.com Inc. All Rights Reserved.
var _uxa=window._uxa||[];try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1,"link":1};u.scriptrequested=false;function forceBoolean(flag){if(typeof flag==="string"){if(flag.toLowerCase()==="false"){return false;}else if(flag.toLowerCase()==="true"){return true;}}
return Boolean(flag);};u.DVAR='dvar.';u.DVAR_LENGTH=u.DVAR.length;u.map={"contentSquare_projectId":"id_project","pageType":"custom.1.pageType","userLogStatus":"custom.2.userLogStatus","pageName":"custom.3.pageName","productSku":"custom.13.productName","paymentMethod":"custom.19.payment_type","cs_event:apv":"trackVirtualPageview"};u.extend=[function(a,b){try{if((b['ut.event']=='link'&&b['categoryGa']=='search'&&b['actionGa']=='search_results'&&typeof b['qp.search']!='undefined'&&b['qp.search']!='')||(b['ut.event']=='link'&&b['categoryGa']=='product_list'&&b['actionGa']=='product_selection'&&/^gift/.test(b['pageName']))){b['cs_event']='apv'}}catch(e){utag.DB(e);}},function(a,b){try{if(b['dom.domain'].toString().indexOf('vuitton.net')>-1||b['dom.domain'].toString().indexOf('.louisvuitton.')<0){return false}}catch(e){utag.DB(e)}},function(a,b){try{if((/buypath\/3ds/.test(b['pageName'])&&/link|view/.test(b['ut.event']))||b['environmentId'].toString().toLowerCase()=='csc'.toLowerCase()){return false}}catch(e){utag.DB(e)}},function(a,b){try{if(1){window._uxa=window._uxa||[];var PIIobject={PIISelectors:[".pac-container .pac-item"],Attributes:[]};window._uxa.push(['setPIISelectors',PIIobject]);}}catch(e){utag.DB(e)}},function(a,b){try{if(b['dom.query_string'].toString().indexOf('lv_pass')<0){if(window.self!==window.top){return false}}}catch(e){utag.DB(e)}},function(a,b,c,d,e,f,g){if(b['ut.env']=='dev'){d=b['environmentVersion'];if(typeof d=='undefined')return;c=[{'de':'bf51230b08ab3'},{'fr':'bf51230b08ab3'},{'jp':'bf51230b08ab3'},{'us':'bf51230b08ab3'},{'gb':'bf51230b08ab3'},{'au':'bf51230b08ab3'},{'es':'bf51230b08ab3'},{'it':'bf51230b08ab3'},{'ae':'bf51230b08ab3'},{'ca':'bf51230b08ab3'},{'kr':'bf51230b08ab3'},{'cn':'0d21e0c4aa946'},{'tw':'73963a101c69e'},{'hk':'ba1f06bcbdbe7'},{'sa':'bf51230b08ab3'},{'qa':'bf51230b08ab3'},{'kw':'bf51230b08ab3'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['contentSquare_projectId']=c[e][f];m=true};};if(m)break};}},function(a,b,c,d,e,f,g){if(b['ut.env']=='qa'){d=b['environmentVersion'];if(typeof d=='undefined')return;c=[{'de':'bf51230b08ab3'},{'fr':'bf51230b08ab3'},{'jp':'bf51230b08ab3'},{'us':'bf51230b08ab3'},{'gb':'bf51230b08ab3'},{'au':'bf51230b08ab3'},{'es':'bf51230b08ab3'},{'it':'bf51230b08ab3'},{'ae':'bf51230b08ab3'},{'ca':'bf51230b08ab3'},{'kr':'bf51230b08ab3'},{'th':'a56f3c6a7f95e'},{'cn':'0d21e0c4aa946'},{'eu':'1f0a600a8aae7'},{'sg':'dcb3a04d83494'},{'tw':'73963a101c69e'},{'hk':'ba1f06bcbdbe7'},{'nz':'dcb3a04d83494'},{'my':'dcb3a04d83494'},{'sa':'bf51230b08ab3'},{'qa':'bf51230b08ab3'},{'kw':'bf51230b08ab3'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['contentSquare_projectId']=c[e][f];m=true};};if(m)break};}},function(a,b,c,d,e,f,g){if(/prod/.test(b['ut.env'])){d=b['environmentVersion'];if(typeof d=='undefined')return;c=[{'de':'b11a035712540'},{'fr':'b11a035712540'},{'jp':'b11a035712540'},{'us':'b11a035712540'},{'gb':'b11a035712540'},{'au':'ef7d99c0236b0'},{'es':'ac47735ae40aa'},{'it':'e91866b5e51b6'},{'ae':'a6420e27a8c5b'},{'ca':'1cb06799dd664'},{'kr':'2fbd1a8eb1bd7'},{'th':'eaa9d52294515'},{'cn':'0d21e0c4aa946'},{'eu':'87595f05f8fd5'},{'sg':'71bcaf2bce4cb'},{'tw':'cb06a5f299562'},{'hk':'c5aac81c414c9'},{'nz':'71bcaf2bce4cb'},{'my':'71bcaf2bce4cb'},{'sa':'a6420e27a8c5b'},{'qa':'a6420e27a8c5b'},{'kw':'a6420e27a8c5b'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['contentSquare_projectId']=c[e][f];m=true};};if(m)break};}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:104");utag.DB(b);var c,d,e,f,udh_collection=[];u.data={"base_url":"//t.contentsquare.net/uxa/##utag_id_project##.js","id_project":"","custom":{},"path":"","product_id":[],"product_name":[],"product_sku":[],"product_category":[],"product_quantity":[],"product_unit_price":[],"order_id":"","order_total":"","order_currency":"","send_udh_audiences":"false","send_udh_data":{},"sendEventsToReplay":"","dvar":{},"event_queue":[],};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB("send:104:EXTENSIONS");utag.DB(b);c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f].indexOf("custom.")===0){u.data.custom[[e[f].substr(7)]]=b[d];}else if(e[f].indexOf("send_udh_data.")===0||e[f].indexOf("send_data.")===0){u.data.send_udh_data[d]=e[f].split(".")[1];}else if(e[f]==="send_audiences"){u.data.send_udh_audiences=b[d];}else if(e[f].indexOf(u.DVAR)===0){u.data.dvar[[e[f].substr(u.DVAR_LENGTH)]]=b[d];}
else{u.data[e[f]]=b[d];}}
}else{var g=d.split(":");if(g.length===2&&b[g[0]]===g[1]){if(u.map[d]){u.data.event_queue=u.data.event_queue.concat(u.map[d].split(","));}}}}
utag.DB("send:104:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||b._corder||"";u.data.order_total=u.data.order_total||b._ctotal||"";u.data.order_currency=u.data.order_currency||b._ccurrency||"";if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_sku.length===0&&b._csku!==undefined){u.data.product_sku=b._csku.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
u.data.base_url=u.data.base_url.replace("##utag_id_project##",u.data.id_project);u.data.path=u.data.path||location.pathname+location.hash.replace("#","?__");var custom,customVar;for(custom in u.data.custom){if(u.data.custom.hasOwnProperty(custom)&&custom!==""){customVar=custom.split(".");_uxa.push(["setCustomVariable",customVar[0],customVar[1],u.data.custom[custom],3]);}}
if(forceBoolean(u.data.send_udh_audiences)){Object.keys(b).forEach(function(key){if(key.indexOf("va.audiences.")===0){_uxa.push(["trackDynamicVariable",{"key":"CDP_TL_Audience ID : "+key.substr(key.lastIndexOf("_")+1),"value":b[key]}]);}});}
Object.keys(u.data.send_udh_data).forEach(function(key){_uxa.push(["trackDynamicVariable",{"key":"CDP_TL_Badge ID : "+key.substr(key.lastIndexOf(".")+1),"value":u.data.send_udh_data[key]}]);});Object.keys(u.data.dvar).forEach(function(key){_uxa.push(["trackDynamicVariable",{"key":key,"value":u.data.dvar[key]}]);});if(u.data.order_id&&u.data.order_total){_uxa.push(["ecommerce:addTransaction",{"id":u.data.order_id,"revenue":u.data.order_total,"currency":u.data.order_currency}]);for(f=0;f<u.data.product_id.length;f++){if(u.data.product_name[f]&&u.data.product_sku[f]&&!isNaN(parseFloat(u.data.product_unit_price[f]))&&!isNaN(parseFloat(u.data.product_quantity[f]))){_uxa.push(["ecommerce:addItem",{"id":u.data.order_id,"name":u.data.product_name[f],"sku":u.data.product_sku[f],"category":u.data.product_category[f],"price":u.data.product_unit_price[f],"quantity":u.data.product_quantity[f]}]);}else{utag.DB(u.id+" (ContentSquare): Item not tracked in transaction: Required attribute(s) not populated");}}
_uxa.push(["ecommerce:send"]);}else{utag.DB(u.id+" (ContentSquare): Transaction not tracked: Required attribute(s) not populated");}
if(a!=="view"){_uxa.push(["setPath",u.data.path]);}
if(!u.scriptrequested){u.scriptrequested=true;u.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":"utag_104","attrs":{}});u.data.event_queue.push('trackPageview')}
if(a==="view"&&u.data.event_queue.indexOf('trackPageview')===-1){_uxa.push(['setQuery',location.search]);_uxa.push(["trackPageview",u.data.path]);}
if(u.data.event_queue.toString()==="trackVirtualPageview"){_uxa.push(['setQuery',location.search+(location.search?'&':'?')+'cs-popin-dedicated_query_string']);_uxa.push(['trackPageview',window.location.pathname+window.location.hash.replace('#','?__')]);_uxa.push(['setQuery',location.search]);}
utag.DB("send:104:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("104","louisvuitton.vuestack"));}catch(error){utag.DB(error);}
