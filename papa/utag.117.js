//tealium universal tag - utag.117 ut4.0.202507010813, Copyright 2025 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1,'link':1};u.initialized=false;u.autoTrackLoaded=false;u.map={"sd_base_url":"base_url","sd_server_url":"server_url","sd_is_track_single_page":"is_track_single_page","sd_use_client_time":"use_client_time","sd_send_type":"send_type","sd_show_log":"show_log","sd_app_js_bridge":"app_js_bridge","ga4_event:interaction":"interaction","ga4_event:purchase":"purchase","ga4_event:add_to_cart":"add_to_cart","ga4_event:aid_select_item":"select_item","ga4_event:aid_internal_search":"search","ga4_event:aid_predictive_search":"search","ga4_event:lga_sign_up":"sign_up","ga4_event:aid_add_to_wishlist":"add_to_wishlist","ga4_event:aid_remove_from_cart":"remove_from_cart","ga4_event:login":"login","ga4_event:remove_from_cart":"remove_from_cart","ga4_event:begin_checkout":"begin_checkout","ga4_event:aid_add_shipping_info":"add_shipping_info","ga4_event:aid_add_payment_info":"add_payment_info","ga4_event:share":"share","ga4_event:aid_cta_status":"cta_status","ga4_event:lga_qubit_stock":"qubit_stock","ga4_event:aga_call_client_service":"call_client_service","ga4_event:lga_appointment_confirmation":"appointment_booking_confirmation,appointment_confirmation","ga4_event:cga_player":"player","ga4_event:exception":"exception","ga4_event:logout":"logout","ga4_event:view_item":"view_item","ga4_event:pt_view_item_list":"page_view","ga4_event:pn_view_store_locator":"page_view","ga4_event:pn_view_identification":"page_view","ga4_event:pn_view_shipping":"page_view","ga4_event:pn_view_payment":"page_view","ga4_event:pn_view_review":"page_view","ga4_event:view_cart":"page_view","ga4_event:page_view":"page_view","ga4_event:aid_search":"search","ga4_event:aga_search":"search","ga4_event:view_item_list":"view_item_list","ga4_event:aga_find_in_store":"find_in_store","ga4_event:aga_find_in_store_selection":"find_in_store_selection","ga4_event:lga_appointment_booking":"appointment_booking","ga4_event:lga_appointment_booking_location":"appointment_booking_location","ga4_event:lga_appointment_booking_store":"appointment_booking_store","ga4_event:lga_appointment_booking_interaction":"appointment_booking_interaction","ga4_event:lga_appointment_booking_time":"appointment_booking_time","ga4_event:lga_find_in_store_location":"find_in_store_location","ga4_event:aga_nl_subscription":"nl_subscription","ga4_event:aga_get_notified":"get_notified","ga4_event:aga_get_notified_button":"get_notified_button","ga4_event:aid_remove_from_wishlist":"remove_from_wishlist","ga4_event:aid_store_locator":"store_locator","ga4_event:aid_store_locator_location":"store_locator_location","ga4_event:aid_store_locator_store":"store_locator_store","ga_user_id":"customer_id","dom.url":"event.$url","cp.ATGID":"event.atg_id,set.user_properties.atg_id","cp.SFID":"event.sf_id,set.user_properties.sf_id","cp.gtm_cookie_consent":"event.consent_status","dom.title":"event.$title","event_type":"event.event_type","categoryGa":"event.event_category","actionGa":"event.event_action","labelGa":"event.event_label","ut.env":"event.environment_instance","environmentId":"public.environment_id","environmentType":"public.environment_type","environmentLanguage":"public.environment_language","environmentVersion":"public.environment_version","pageName":"public.page_name","pageType":"public.page_type","screenOrientation":"public.screen_orientation","currencyCode":"public.currency_code","technicalStackId":"event.technical_stack_id","userLogStatus":"event.user_log_status","errorId":"event.error_id","invoicingCountryForSite":"event.invoicing_country_for_site","tealium_info":"event.tealium_info","cp.utag_main_ses_id":"event.utag_main_ses_id","cp.utag_main_v_id":"event.utag_main_v_id","backOrderStatus":"event.back_order_status","osName":"event.os_name","crossSellProductSku":"event.cross_sell_product_sku","crossSellStatus":"event.cross_sell_status","paymentMethod":"event.payment_type","productOnlineSellableStatus":"event.product_online_sellable_status","productOption":"event.product_option","productSku":"event.product_sku","productStockStatus":"event.product_stock_status","productSubOption":"event.product_sub_option","shippingAdressStatus":"event.shipping_address_status","shippingCountry":"event.shipping_country","shippingMethod":"event.shipping_method","shippingState":"event.shipping_state","addToCartButtonLabel":"event.add_to_cart_button_label","getStockSku":"event.get_stock_sku","gender":"event.gender","purchaseId":"event.transaction_id","threeSixtyStatus":"event.three_six_status","buypathUserType":"event.buypath_user_type","totalRepairs":"set.user_properties.total_repairs","contentId":"event.content_id","contentType":"event.content_type","channelId":"event.channel_id","menuId":"event.menu_id","subMenuId":"event.sub_menu_id","actionPosition":"event.action_position","menuLevel":"event.menu_level","totalWishlistProducts":"set.user_properties.total_wishlist_products","totalMyRecommendations":"set.user_properties.total_recommendations","animationId":"event.animation_id","pageRank":"event.page_rank","exclusiveSaleStatus":"event.exclusive_sale_status","qp.sender":"event.sender","qp.istaging":"event.virtual_store_name","wardrobingSku":"event.wardrobing_sku","storeId":"event.store_id","myAppointmentStoreStatus":"event.my_appointment_store_status","myAppointmentNumberOfResults":"event.my_appointments_number_of_results","faqSearchKeywords":"event.faq_search_keywords","faqNumberOfResults":"event.faq_number_of_results","internalSearchKeywords":"event.search_term","totalCertificates":"set.user_properties.total_certificates","numberOfResults":"event.number_of_results","numberOfResultsPerSection":"event.number_of_results_per_section","filterCategory":"event.filter_category","filterId":"event.filter_id","filterSubCategory":"event.filter_sub_category","filterType":"event.filter_type","activeFilters":"event.active_filters","abTestId":"event.ab_test_id","experienceId":"event.experience_id","abTestVariant":"event.ab_test_variant","experienceName":"event.experience_name","experienceIsCtrl":"event.experience_is_ctrl","experienceMasterId":"event.experience_master_id","cs_matching_key":"event.cs_matching_key","qp.A":"event.dream_id","productListName":"event.item_list_name","event":"event.event_ref","positionNumber":"event.position_number","qp.campaign":"set.campaign.name","qp.utm_source":"set.campaign.source","qp.utm_medium":"set.campaign.medium","utm_source":"set.campaign.source","utm_medium":"set.campaign.medium","qp.utm_campaign":"set.campaign.name","order_id_buypath":"event.buypath_order_id","storeCity":"event.store_city","storeCountry":"event.store_country","asset_load_time":"event.asset_load_time","price":"event.price","totalAmount":"event.total_amount","shippingCost":"event.shipping_cost","total_quantity":"event.quantity","sd_platform_name":"public.platform_name","sd_platform_type":"public.platform_type","deviceType":"public.device"};u.extend=[function(a,b){try{if(b['event']=='purchase'){if(typeof b['purchaseId']!=="undefined"){if(sessionStorage.getItem("purchaseIdControl")!==null){if(sessionStorage.getItem("purchaseIdControl")===b['purchaseId']){return false;}else{sessionStorage.setItem("purchaseIdControl",b['purchaseId']);}}else{sessionStorage.setItem("purchaseIdControl",b['purchaseId']);}
}
return true;}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['quantity']!='undefined'&&typeof b['quantity']!='undefined'&&b['quantity']!='')){try{b['total_quantity']=b['quantity'].split(",").length===1?parseInt(b['quantity']):b['quantity'].split(",").reduce((a,b)=>parseInt(a)+parseInt(b))}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['menuLevel']=='undefined'&&b['ut.event']=='link'&&b['categoryGa']=='header'&&b['actionGa']=='mega_menu')){b['menuLevel']='menu_level_1'}}catch(e){utag.DB(e);}},function(a,b,c,d,e,f,g){if(1){d=b['ut.env'];if(typeof d=='undefined')return;c=[{'dev':'https://clienteling-data-prp.lvcampaign.com/sa?project=AppWeb'},{'qa':'https://clienteling-data-prp.lvcampaign.com/sa?project=AppWeb'},{'prod':'https://clienteling-data.lvcampaign.com/sa?project=AppWeb'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['sd_server_url']=c[e][f];m=true};};if(m)break};}},function(a,b){try{if(1){try{b['sd_base_url']="https://tp"+(b["ut.env"]==="prod"?"":"-ppf")+".louisvuitton.cn/sensorsdata/v1/sensorsdata.min.js"}catch(e){};try{b['sd_is_track_single_page']=true}catch(e){};try{b['sd_use_client_time']=true}catch(e){};b['sd_send_type']='beacon';try{b['sd_show_log']=false}catch(e){};try{b['sd_app_js_bridge']=false}catch(e){};b['sd_platform_name']='LV.CN';b['sd_platform_type']='WEB'}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['cp.sddb']!='undefined'&&b['cp.sddb']=='true')){try{b['sd_show_log']=true}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['qp.lvpass']!='undefined'&&b['qp.lvpass']=='true')||b['environmentId']=='LVPassApp'){try{b['sd_app_js_bridge']=true}catch(e){};b['sd_platform_name']='LV_APP';b['sd_platform_type']='H5'}}catch(e){utag.DB(e);}},function(a,b){try{if(b['dom.domain'].toString().indexOf('vuitton.net')>-1||b['dom.domain'].toString().indexOf('.louisvuitton.')<0){return false}}catch(e){utag.DB(e)}},function(a,b){utag.ut.sha1=function(t,n){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r&&"function"==typeof require)try{r=require("crypto")}catch(t){}var e=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(n){var r;return t.prototype=n,r=new t,t.prototype=null,r}}(),o={},s=o.lib={},a=s.Base={extend:function(t){var n=i(this);return t&&n.mixIn(t),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=a.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var n=this.words,r=t.words,e=this.sigBytes,i=t.sigBytes;if(this.clamp(),e%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;n[e+o>>>2]|=s<<24-(e+o)%4*8}else for(o=0;o<i;o+=4)n[e+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var n=this.words,r=this.sigBytes;n[r>>>2]&=4294967295<<32-r%4*8,n.length=t.ceil(r/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(e());return new c.init(n,t)}}),u=o.enc={},f=u.Hex={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push((o>>>4).toString(16)),e.push((15&o).toString(16))}return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e+=2)r[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new c.init(r,n/2)}},h=u.Latin1={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push(String.fromCharCode(o))}return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e++)r[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new c.init(r,n)}},d=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},l=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var r,e=this._data,i=e.words,o=e.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=n?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,f=t.min(4*u,o);if(u){for(var h=0;h<u;h+=s)this._doProcessBlock(i,h);r=i.splice(0,u),e.sigBytes-=f}return new c.init(r,f)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(s.Hasher=l.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(n,r){return new t.init(r).finalize(n)}},_createHmacHelper:function(t){return function(n,r){return new p.HMAC.init(t,r).finalize(n)}}}),o.algo={});return o}(Math);!function(){var t=utag.ut.sha1,e=t.lib,s=e.WordArray,a=e.Hasher,r=t.algo,h=[],i=r.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var s=this._hash.words,a=s[0],r=s[1],i=s[2],n=s[3],o=s[4],c=0;c<80;c++){if(c<16)h[c]=0|t[e+c];else{var l=h[c-3]^h[c-8]^h[c-14]^h[c-16];h[c]=l<<1|l>>>31}var _=(a<<5|a>>>27)+o+h[c];_+=c<20?1518500249+(r&i|~r&n):c<40?1859775393+(r^i^n):c<60?(r&i|r&n|i&n)-1894007588:(r^i^n)-899497514,o=n,n=i,i=r<<30|r>>>2,r=a,a=_}s[0]=s[0]+a|0,s[1]=s[1]+r|0,s[2]=s[2]+i|0,s[3]=s[3]+n|0,s[4]=s[4]+o|0},_doFinalize:function(){var t=this._data,e=t.words,s=8*this._nDataBytes,a=8*t.sigBytes;return e[a>>>5]|=128<<24-a%32,e[14+(a+64>>>9<<4)]=Math.floor(s/4294967296),e[15+(a+64>>>9<<4)]=s,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=a._createHelper(i),t.HmacSHA1=a._createHmacHelper(i)}();try{if(typeof b['cp.SFID']!='undefined'&&b['cp.SFID']!=''){b['cp.SFID']=utag.ut.sha1.SHA1(b['cp.SFID']).toString();}}catch(e){};try{if(typeof b['cp.ATGID']!='undefined'&&b['cp.ATGID']!=''){b['cp.ATGID']=utag.ut.sha1.SHA1(b['cp.ATGID']).toString();}}catch(e){}},function(a,b){try{if((typeof b['cp.ATGID']!='undefined'&&b['cp.ATGID']!='0a92fab3230134cca6eadd9898325b9b2ae67998')){b['ga_user_id']=b['cp.ATGID'];b['userLogStatus']='logged_user'}}catch(e){utag.DB(e);}},function(a,b){try{if((b['ut.event'].toString().indexOf('link')>-1&&typeof b['actionId']!='undefined'&&b['actionId'].toString().indexOf('product_selection')>-1&&typeof b['crossSellProductSku']!='undefined'&&b['crossSellProductSku']!='')){try{b['_cprod']=b["crossSellProductSku"].split()}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{if((b['ut.event'].toString().indexOf('link')>-1&&typeof b['positionNumber']!='undefined'&&typeof b['actionPosition']!='undefined'&&b['actionPosition'].toString().toLowerCase()!='history_module'.toLowerCase()&&/_[0-9]+$/.test(b['positionNumber']))||(b['ut.event'].toString().indexOf('link')>-1&&typeof b['positionNumber']!='undefined'&&typeof b['actionPosition']=='undefined'&&/_[0-9]+$/.test(b['positionNumber']))){try{b['positionNumber']=new Array(b["positionNumber"].split("_")[1])}catch(e){}}}catch(e){utag.DB(e);}},function(a,b,c,d){try{if((typeof b['actionId']!='undefined'&&b['actionId'].toString().indexOf('product_selection')>-1&&b['pageType'].toString().indexOf('productsheet')>-1)||(typeof b['actionId']!='undefined'&&b['actionId'].toString().indexOf('shop_the_selection_product_selection')>-1&&b['pageType'].toString().indexOf('news_article')>-1)){c=[b['pageType'],b['actionGa']];b['productListName']=c.join('::')}}catch(e){utag.DB(e);}},function(a,b){try{if((/product_list|buypath|search_result_list/.test(b['pageType'])&&typeof b['actionId']!='undefined'&&/product_selection|go_to_product_sheet|go_to_productsheet|item_selection/.test(b['actionId'])&&typeof b['actionType']=='undefined')){b['productListName']=b['pageType']}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['actionType']!='undefined'&&typeof b['actionId']!='undefined'&&b['actionType'].toString().indexOf('navigation')>-1&&b['actionId'].toString().toLowerCase()=='go_to_product_sheet'.toLowerCase())){b['productListName']=b['actionPosition']}}catch(e){utag.DB(e);}},function(a,b){try{if((b['ut.event'].toString().indexOf('link')>-1&&typeof b['actionId']!='undefined'&&/go_to_product_sheet|product_selection|predictive_search_product|go_to_productsheet/.test(b['actionId']))){try{b['productListName']=b["productListName"].split()[0]}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['actionId']!='undefined'&&b['actionId'].toString().indexOf('item_selection')>-1&&b['ut.event'].toString().indexOf('link')>-1&&typeof b['contentType']!='undefined'&&b['contentType'].toString().indexOf('product')>-1)){b['event']='search_productSelection'}}catch(e){utag.DB(e);}},function(a,b){try{if(1){try{b['categoryGa']=b['categoryGa'].toString()}catch(e){};try{b['actionGa']=b['actionGa'].toString()}catch(e){};try{b['labelGa']=b['labelGa'].toString()}catch(e){};try{b['experienceId']=b['experienceId'].toString()}catch(e){};try{b['experienceIsCtrl']=b['experienceIsCtrl'].toString()}catch(e){};try{b['experienceMasterId']=b['experienceMasterId'].toString()}catch(e){};try{b['experienceName']=b['experienceName'].toString()}catch(e){};try{b['totalCertificates']=parseInt(b['totalCertificates'])}catch(e){};try{b['totalMyRecommendations']=parseInt(b['totalMyRecommendations'])}catch(e){};try{b['totalRepairs']=parseInt(b['totalRepairs'])}catch(e){};try{b['totalWishlistProducts']=parseInt(b['totalWishlistProducts'])}catch(e){};try{b['positionNumber']=parseInt(b['positionNumber'])}catch(e){};try{b['shippingCost']=parseFloat(b['shippingCost'])}catch(e){};try{b['totalAmount']=parseFloat(b['totalAmount'])}catch(e){};try{b['quantity']=parseInt(b['quantity'])}catch(e){}}}catch(e){utag.DB(e);}}];function mapFunc(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){mapFunc(arr,obj[i],item);}else{obj[i]=item;}}
u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={"base_url":"","server_url":"https://clienteling-data-prp.lvcampaign.com/sa?project=AppWeb","is_track_single_page":false,"use_client_time":true,"send_type":"beacon","show_log":false,"app_js_bridge":false,"order_id":"","order_total":"","order_subtotal":"","order_shipping":"","order_tax":"","order_store":"","order_currency":"","order_coupon_code":"","product_id":[],"product_name":[],"product_brand":[],"product_category":[],"product_subcategory":[],"product_addcategory3":[],"product_addcategory4":[],"product_addcategory5":[],"product_quantity":[],"product_unit_price":[],"product_discount":[],"product_coupon":[],"product_variant":[],"product_promotion_id":[],"product_promotion_name":[],"product_creative_name":[],"product_creative_slot":[],"product_location_id":[],"product_index":[],"product_item_list_name":[],"product_item_list_id":[],"product_affiliation":[],"event_queue":[],"config":{},"set":{"developer_id.dYmQxMT":true,"user_properties":{}},"event":{},"items":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB("send:117:EXTENSIONS");utag.DB(b);for(var mapping_key in utag.loader.GV(u.map)){if(b[mapping_key]!==undefined&&b[mapping_key]!==""){var destinations=u.map[mapping_key].split(",");for(i=0;i<destinations.length;i++){mapFunc(destinations[i].split("."),u.data,b[mapping_key]);}}else{var event_destinations=mapping_key.split(":");if(event_destinations.length===2&&b[event_destinations[0]]===event_destinations[1]){if(u.map[mapping_key]){u.data.event_queue=u.data.event_queue.concat(u.map[mapping_key].split(","));}}}}
utag.DB("send:117:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||b._corder||"";u.data.order_total=u.data.order_total||b._ctotal||"";u.data.order_shipping=u.data.order_shipping||b._cship||"";u.data.order_tax=u.data.order_tax||b._ctax||"";u.data.order_store=u.data.order_store||b._cstore||"";u.data.order_currency=u.data.order_currency||b._ccurrency||"";u.data.order_coupon_code=u.data.order_coupon_code||b._cpromo||"";u.data.customer_id=u.data.customer_id||b._ccustid||"";if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_brand.length===0&&b._cbrand!==undefined){u.data.product_brand=b._cbrand.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_subcategory.length===0&&b._ccat2!==undefined){u.data.product_subcategory=b._ccat2.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
if(u.data.product_discount.length===0&&b._cpdisc!==undefined){u.data.product_discount=b._cpdisc.slice(0);}
if(!u.data.base_url||!u.data.server_url){utag.DB(u.id+": Tag not fired: Required attributes base_url and server_url are not populated");return;}
u.loader_cb=function(){for(i=0;i<u.data.event_queue.length;i++){var event_name=u.data.event_queue[i];var event_data={};event_data=JSON.parse(JSON.stringify(u.data.event));if(u.event_map[event_name]){for(j=0;j<u.event_map[event_name].length;j++){var event_param=u.event_map[event_name][j];var event_param_value=u.std_params[event_param]?u.std_params[event_param](event_name):u.data[event_param]||"";if(Object.keys(event_param_value).length!==0){event_data[event_param]=event_param_value;}}}
Object.keys(u.map).forEach(function(mapping_from){if(u.map[mapping_from].indexOf(event_name)===0&&typeof b[mapping_from]!=="undefined"){var mapping_to=u.map[mapping_from].substring(event_name.length+1);if(Object.keys(b[mapping_from]).length!==0){event_data[mapping_to]=b[mapping_from];}}});utag.ut.merge(event_data,u.data[event_name],0);if((u.data.event.event_ref&&u.data.event.event_ref.toLowerCase().indexOf("loginsuccess")>-1)||(a==="view"&&(u.data.customer_id&&u.data.customer_id!=="0a92fab3230134cca6eadd9898325b9b2ae67998"))){window.sensors.login(u.data.customer_id);}
if(a==="view"){u.setPublicAttributes();}
if(event_name==="logout"){}
if(event_name==="add_to_cart"){event_data['product_price']=parseInt(u.data.product_unit_price[0]);}
var i,product_metadata;if(u.data.product_id){for(i=0;i<u.data.product_id.length;i++){product_metadata={};if(u.data.product_name[i])product_metadata['name']=u.data.product_name[i];if(u.data.product_category[i])product_metadata['category']=u.data.product_category[i];if(u.data.product_unit_price[i])product_metadata['price']=parseInt(u.data.product_unit_price[i]);window.sensors.setItem("product",u.data.product_id[i],product_metadata);}}
setGlobalProperties(u.data.set,true);setGlobalProperties(u.data.set,false);if(!u.autoTrackLoaded){window.sensors.quick("autoTrack");u.autoTrackLoaded=true;}
window.sensors.track(event_name,event_data);if(event_name==="purchase"){if(u.data.product_id){for(i=0;i<u.data.product_id.length;i++){event_data['product_sku']=u.data.product_id[i];if(u.data.product_name[i])event_data['product_name']=u.data.product_name[i];if(u.data.product_quantity[i])event_data['product_quantity']=parseInt(u.data.product_quantity[i]);else event_data['product_quantity']=1;if(u.data.product_unit_price[i])event_data['product_price']=parseInt(u.data.product_unit_price[i])*event_data['product_quantity'];window.sensors.track("purchase_detail",event_data);}}}}};u.event_map={add_payment_info:["coupon","currency","payment_type","value"],add_shipping_info:["coupon","currency","shipping_tier","value"],add_to_cart:["currency","value","product_price"],add_to_wishlist:["currency","value"],begin_checkout:["coupon","currency","value"],purchase:["affiliation","coupon","currency","transaction_id","shipping","tax","value"],remove_from_cart:["currency","value"],select_content:["content_type","item_id"],select_item:["item_list_name","item_list_id"]};u.std_params={"transaction_id":function(){return u.data.order_id;},"affiliation":function(){return u.data.order_store;},"value":function(event){if(event.match(/timing_complete|virtual_currency/i)){return parseFloat(u.data.value);}
return parseFloat(u.data.order_total);},"currency":function(){return u.data.order_currency;},"tax":function(){return parseFloat(u.data.order_tax);},"shipping":function(){return parseFloat(u.data.order_shipping);},"coupon":function(){return u.data.order_coupon_code;},"fatal":function(){return toBoolean(u.data.fatal);},"items":function(event){if(event.match(/view_item$|select_content/)){return getItems(1);}
return getItems();},"item_id":function(){return u.data.product_id[0]?u.data.product_id[0]:"";},"product_price":function(){return parseInt(u.data.product_unit_price[0]);}};function setGlobalProperties(data,reset){var a={},d=[];if(data["user_properties"]){for(var prop in data["user_properties"]){if(reset){d.push(prop);}else{a[prop]=data["user_properties"][prop];}}
if(reset){}else{window.sensors.setProfile(a);}}}
function getItems(length){var g={},i,items=[];length=length||u.data.product_id.length||u.data.product_name.length;for(i=0;i<length;i++){g={};g.item_id=u.data.product_id[i];if(u.data.product_name[i]){g.item_name=u.data.product_name[i];}
if(u.data.product_coupon[i]){g.coupon=u.data.product_coupon[i];}
if(u.data.product_discount[i]){g.discount=u.data.product_discount[i];}
if(u.data.product_affiliation[i]){g.affiliation=u.data.product_affiliation[i];}
if(u.data.product_brand[i]){g.item_brand=u.data.product_brand[i];}
if(u.data.product_category[i]){g.item_category=u.data.product_category[i];}
if(u.data.product_subcategory[i]){g.item_category2=u.data.product_subcategory[i];}
if(u.data.product_addcategory3[i]){g.item_category3=u.data.product_addcategory3[i];}
if(u.data.product_addcategory4[i]){g.item_category4=u.data.product_addcategory4[i];}
if(u.data.product_addcategory5[i]){g.item_category5=u.data.product_addcategory5[i];}
if(u.data.product_variant[i]){g.item_variant=u.data.product_variant[i];}
if(u.data.product_unit_price[i]){g.price=parseInt(u.data.product_unit_price[i]);}
if(u.data.order_currency){g.currency=u.data.order_currency;}
if(u.data.product_quantity[i]){g.quantity=parseInt(u.data.product_quantity[i]);}
if(u.data.product_promotion_id[i]){g.promotion_id=u.data.product_promotion_id[i];}
if(u.data.product_promotion_name[i]){g.promotion_name=u.data.product_promotion_name[i];}
if(u.data.product_creative_name[i]){g.creative_name=u.data.product_creative_name[i];}
if(u.data.product_creative_slot[i]){g.creative_slot=u.data.product_creative_slot[i];}
if(u.data.product_location_id[i]){g.location_id=u.data.product_location_id[i];}
if(u.data.product_index[i]){g.index=u.data.product_index[i];}
if(u.data.product_item_list_name[i]){g.item_list_name=u.data.product_item_list_name[i];}
if(u.data.product_item_list_id[i]){g.item_list_id=u.data.product_item_list_id[i];}
items.push(g);}
return items;}
u.setPublicAttributes=function(){var public_attributes={};Object.keys(u.map).forEach(function(mapping_from){if(u.map[mapping_from].indexOf("public")===0&&typeof b[mapping_from]!=="undefined"){var mapping_to=u.map[mapping_from].substring("public".length+1);if(Object.keys(b[mapping_from]).length!==0){public_attributes[mapping_to]=b[mapping_from];}}});if(Object.keys(public_attributes).length!==0){window.sensors.registerPage(public_attributes);}}
if(!u.initialized){window.sensors=window['sensorsDataAnalytic201505'];window.sensors.init({server_url:u.data.server_url,heatmap:{clickmap:'not_collect',scroll_notice_map:'default'},cross_subdomain:true,is_track_single_page:u.data.is_track_single_page,use_client_time:u.data.use_client_time,send_type:u.data.send_type,show_log:u.data.show_log,app_js_bridge:u.data.app_js_bridge});u.setPublicAttributes();u.initialized=true;u.loader_cb();}else{u.loader_cb();}
}};utag.o[loader].loader.LOAD(id);})("117","louisvuitton.vuestack");}catch(error){utag.DB(error);}
